(this.webpackJsonpsporder=this.webpackJsonpsporder||[]).push([[0],{71:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(0),r=n.n(c),i=n(8),s=n.n(i),o=(n(71),n(23)),l=n(21),u=n(34),d=n.n(u),j=n(43),b=(n(80),n(57)),h=n(32),O=n.n(h),p=n(50),x=n(44),f=n(126),m=n(127),k=n(121),g=n(89),v=n(40),C=n(113),T=n(115),S=n(117),_=n(118),y=n(128),P=n(122),w=n(123),A=n(130),E=n(119),L=n(124),D=n(125),B=Object(C.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),I=function(e){var t=e.selectedPlaylist,n=e.onSortDown,r=e.onSortUp,i=B(),s=Object(l.e)().data,u=Object(c.useState)(null),j=Object(o.a)(u,2),b=j[0],h=j[1],O=Boolean(b),p=function(){h(null)};return Object(a.jsx)(T.a,{position:"static",children:Object(a.jsxs)(S.a,{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(_.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){console.log("data",s),h(e.currentTarget)},color:"inherit",children:Object(a.jsx)(E.a,{})}),Object(a.jsxs)(y.a,{id:"menu-appbar",anchorEl:b,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:O,onClose:p,children:[s&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(P.a,{onClick:function(){window.open(s.external_urls.spotify,"_blank")},children:s.display_name}),Object(a.jsxs)(P.a,{onClick:p,children:["Followers: ",s.followers.total]}),Object(a.jsxs)(P.a,{onClick:p,children:["Subscription: ",s.product]})]}),Object(a.jsx)(P.a,{onClick:function(){d.a.remove("spotifyAuthToken"),window.open("/","_self")},children:Object(a.jsx)(w.a,{primaryTypographyProps:{color:"error"},children:"Logout"})})]})]}),Object(a.jsx)(v.a,{variant:"h6",className:i.title,children:"Sort a playlist by title length"}),t&&t.tracks&&Object(a.jsxs)(v.a,{variant:"h6",className:i.title,children:["(",t.tracks.total," Songs)"]}),Object(a.jsx)(A.a,{title:"Ascending",children:Object(a.jsx)(_.a,{className:i.menuButton,color:"inherit","aria-label":"menu",onClick:r,children:Object(a.jsx)(L.a,{})})}),Object(a.jsx)(A.a,{title:"Descending",children:Object(a.jsx)(_.a,{className:i.menuButton,color:"inherit","aria-label":"menu",onClick:n,children:Object(a.jsx)(D.a,{})})})]})})},N=n(56),R=n.n(N),F=function(e){var t=e.token,n=Object(l.e)().data,r=Object(c.useState)(""),i=Object(o.a)(r,2),s=i[0],u=i[1],d=Object(c.useState)(!1),j=Object(o.a)(d,2),h=j[0],C=j[1],T=new R.a;T.setAccessToken(t);var S=function(e,t){return e.reduce((function(e,n,a){return a%t?e[e.length-1].push(n):e.push([n]),e}),[])},_=function(){var e=Object(x.a)(O.a.mark((function e(){var t,n,a,c,r,i,o,l,u,d,j=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=j.length>0&&void 0!==j[0]?j[0]:"asc",!s||!s.id){e.next=34;break}n=0,a=[];case 4:if(!(a.length<s.tracks.total)){e.next=12;break}return e.next=7,T.getPlaylistTracks(s.id,{offset:n});case 7:c=e.sent,a=a.concat(c.items),n+=100,e.next=4;break;case 12:return r=a.sort((function(e,n){return"asc"===t?e.track.name.length-n.track.name.length:n.track.name.length-e.track.name.length})),i=r.map((function(e){return e.track.uri})),o=S(i,100),e.next=17,T.replaceTracksInPlaylist(s.id,o.shift());case 17:l=Object(p.a)(o),e.prev=18,l.s();case 20:if((u=l.n()).done){e.next=26;break}return d=u.value,e.next=24,T.addTracksToPlaylist(s.id,d);case 24:e.next=20;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(18),l.e(e.t0);case 31:return e.prev=31,l.f(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[18,28,31,34]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(O.a.mark((function e(){var t,n,a=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"asc",C(!0),e.next=4,_(t);case 4:C(!1),n=Object(b.a)({},s),u(null),u(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(f.a,{container:!0,children:[Object(a.jsx)(I,{selectedPlaylist:s,onSortDown:function(){return y("desc")},onSortUp:function(){return y("asc")}}),Object(a.jsx)(f.a,{item:!0,xs:12,children:h&&Object(a.jsx)(m.a,{})}),Object(a.jsx)(f.a,{item:!0,xs:3,children:Object(a.jsx)(l.d,{children:function(e){return!s&&e&&e.data&&e.data.items&&u(e.data.items[0]),e&&e.data?Object(a.jsx)(k.a,{children:e.data.items.map((function(e){return n&&n.id&&e.owner&&n.id===e.owner.id||e.collaborative?Object(a.jsx)(g.a,{button:!0,selected:e&&s&&e.id===s.id,onClick:function(){return u(e)},children:e.name},e.id):null}))}):null}})}),Object(a.jsx)(f.a,{item:!0,xs:9,children:s?Object(a.jsx)(l.a,{id:s.id,children:function(e){return e.data&&e.data.tracks.items?e.data.tracks.items.map((function(e){return Object(a.jsx)("h3",{style:{paddingLeft:"20px"},children:e.track.name},e.track.id)})):e&&e.name?Object(a.jsx)("h1",{children:e.name}):null}}):Object(a.jsx)(v.a,{align:"center",variant:"h5",children:"<- Select a Playlist"})})]})},K=Object({NODE_ENV:"production",PUBLIC_URL:"/sortify",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLIENT_ID:"37e76134257a4e14802eccacd9e1331b",REACT_APP_CALLBACK:"https://muensterer.xyz/sortify"}),U=K.REACT_APP_CLIENT_ID,z=void 0===U?"":U,H=K.REACT_APP_CALLBACK,W=void 0===H?"":H,G=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){r(d.a.get("spotifyAuthToken"))}),[]),Object(a.jsx)("div",{className:"app",children:n?Object(a.jsx)(l.c.Provider,{value:n,children:Object(a.jsx)(F,{token:n})}):Object(a.jsx)(j.b,{redirectUri:W,clientID:z,scopes:[j.a.all]})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(G,{})}),document.getElementById("root")),J()}},[[85,1,2]]]);
//# sourceMappingURL=main.b9ad38e1.chunk.js.map